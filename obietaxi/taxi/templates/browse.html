{% extends "base.html" %}
{% block scripts %}<script type="text/javascript" src="{{ STATIC_URL }}js/browse.js"></script>{% endblock %}
{% block title %}Browse{% endblock %}
{% block heading %}Browse{% endblock %}
{% block content %}

  <!-- ask for ride/offer a ride -->
  <a href="#new_offer_modal" class="btn" role="button" data-toggle="modal">Offer a Ride</a>
  <a href="#new_request_modal" class="btn" role="button" data-toggle="modal">Ask for a Ride</a>
  <div id="new_offer_modal" class="modal hide fade">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    </div>
    <div class="modal-body">
      {% load crispy_forms_tags %}
      {% crispy offer_form %}
    </div>
  </div>
  <div id="new_request_modal" class="modal hide fade">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    </div>
    <div class="modal-body">
      {% load crispy_forms_tags %}
      {% crispy request_form %}
    </div>
  </div>

  {% if ride_requests %}
    <h2>Ride Requests</h2>
    <table name="ride_requests" id="ride_request_table" class="browse_table">
      <tr><th>Departing from</th><th>Going to</th><th>Date</th><th>Name</th></tr>
      {% for item in ride_requests %}
	<tr id="ride_request_listing_{{ item.id }}">
	  <td><a href="/request/show/?request_id={{ item.id }}">{{ item.start }}</a></td>
	  <td><a href="/request/show/?request_id={{ item.id }}">{{ item.end }}</a></td>
	  <td><a href="/request/show/?request_id={{ item.id }}">{{ item.date }}</a></td>
	  <td><a href="/accounts/profile/?user_id={{ item.passenger.id }}">{{ item.passenger }}</a></td>
	</tr>
      {% endfor %}
    </table>
  {% endif %}

  {% if ride_offers %}
    <h2>Ride Offers</h2>
    <table name="ride_offers" id="ride_offer_table" class="browse_table">
      <tr><th>Departing from</th><th>Going to</th><th>Date</th><th>Name</th></tr>
      {% for item in ride_offers %}
	<tr id="ride_offer_listing_{{ item.id }}">
	  <td><a href="/offer/show/?offer_id={{ item.id }}">{{ item.start }}</a></td>
	  <td><a href="/offer/show/?offer_id={{ item.id }}">{{ item.end }}</a></td>
	  <td><a href="/offer/show/?offer_id={{ item.id }}">{{ item.date }}</a></td>
	  <td><a href="/accounts/profile/?user_id={{ item.driver.id }}">{{ item.driver }}</a></td>
	</tr>
      {% endfor %}
    </table>
  {% endif %}

{% endblock %}
